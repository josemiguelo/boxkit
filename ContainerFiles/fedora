FROM quay.io/fedora/fedora-toolbox:latest

LABEL com.github.containers.toolbox="true" \
      usage="This image is meant to be used with the toolbox or distrobox command" \
      summary="My custom image for distrobox" \
      maintainer="josemiguelo.ochoa@gmail.com"

# temp assets
COPY ../scripts/ /tmp/scripts/
COPY ../packages/ /tmp/packages/

# copy setup-dotfiles.sh
RUN mkdir -p /etc/skel/.local/bin
COPY ../scripts/setup-dotfiles.sh /etc/skel/.local/bin/setup-dotfiles.sh
RUN chmod +x /etc/skel/.local/bin/setup-dotfiles.sh
RUN chmod -R 755 /etc/skel/.local

RUN chmod +x /tmp/scripts/*.sh && \
    /tmp/scripts/fedora.sh && \
    rm -rf /tmp/scripts /tmp/packages
